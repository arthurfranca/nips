NIP-64
======

Trust Score
-----------

A trust score is a public way for a user to assign a quantifiable level of trust to a nostr identity or event.
It may be general or scoped to a specific topic.

## Event Structure

The `kind:30382` is a NIP-61 ["Set Item Reference"](https://github.com/arthurfranca/nips/blob/bunch-of-events/61.md#tagging-into-event-sets) event used to assign public information about a pubkey (set to the `d` tag).

This NIP makes use of one or more trust scores added to such events as `T` tags using the following structure:

```js
  [
    "T",
    "<integer_score_ranging_from_1_to_5_or_0_if_unset><colon_separator><optional_topic_name>",
    "re<space_separator><+_or_?_or_->:<review>", // (re)view, optional and may appear many times
    "fl<space_separator><float_score>", // (fl)oat, optional and may appear once
    "ra<space_separator><lower_bound>:<upper_bound>" // (ra)nge, optional and may appear once
  ]
```

A score of "0" means no score was assigned. The effective score range is 1 to 5, like a 5-star rating.

Topic names should be preferably in English, lower case and their words dash-separated.
Topic names are separated from the score by a colon (`:`).
Topic names may include a context prefix, also separated by a colon (`:`).
When there isn't a topic name, the tag value is just the score, without trailing colon.

After the tag value, there may be variadic fields with key and value separated by a space.

### Variadic fields

#### Review

- **Key**: `re`
- **Value**: Sentiment prefix, colon (`:`) separator and the actual review text.
The prefix denote a positive review (`+`), a negative review (`-`) or a neutral one (`?`).

The `?` prefix is usually assigned for free form user generated reviews. On the other hand, `+` and `-` are usually
related to clickable fixed options made available by a client.

There may be any number of reviews. It should have at most one review prefixed with `?`.

Example: `["T", "2", "re ?:This is a review"]`

#### Float

1 - .5
x  - -0.5

- **Key**: `fl`
- **Value**: Float score ranging from 0.0 to 1.0

The client may use it to set a higher precision score.

Example: `["T", "2", "fl 0.2322"]`

#### Range

- **Key**: `ra`
- **Value**: A range. Inclusive lower limit, collon (`:`) separator and inclusive upper limit.

The client may set it to tell both what range and precision were used. The precision is extracted
from the highest number of decimal places used either at the lower or upper limits.

Example ranking systems:
- 3 stars or dislike-like-superlike: `["T", "5", "ra 1:3"]`. In this example, the trust score was set to 3 of 3 stars.
- 5 stars: `ra 1:5`
- 0 to 100 with two decimal places precision: `ra 0:100.00`

## Example Events

Assigning trust score to a pubkey on several topics:

```js
{
  "kind": 30382,
  "tags": [
    ["d", "<pubkey>"],
    ["T", "5:wiki:role-playing-video-game"], // has written a based wiki article about RPG
    ["T", "4:car:driver", "re +:Skilled", "re +:Polite", "re -:Talks too much", "re ?:Likes to talk about movies."],
    ["T", "5:buyer", "re ?:No problems when selling to this person"],
    ["T", "2:seller", "re ?:Had a bad experience when buying from this person."],
    ["T", "0:inn:host"], // This person hosted me but I assigned no trust score yet
    ["T", "5:inn:guest"] // I hosted this person and had no problem
  ],
  // ...other fields
}
```

Note that if a client doesn't recognize a topic name, it should leave the corresponding `T` tag untouched when editing other entry.

Assinging trust score to an app:

```js
{
  "kind": 30384,
  "tags": [
    ["d", "31990:<event-pubkey>:<event-d-tag>"],
    ["T", "0", "re ?:This is a kind:31990 app review."]
  ],
  // ...other fields
}
```

## Filtering

The reason why the rating score (integer value) has few possible values and is placed together with the topic name
is for letting clients filter on relays by both data e.g. to easily fetch good or bad users on specific topics.

Example filters:

- Good car drivers: `{ "kinds": [30382], "#T": ["5:car:driver", "4:car:driver"] }`
- Best merchants: `{ "kinds": [30382], "#T": ["5:seller"] }`

## Topic List

For greater interoperability, trust score topics should be listed here:

| Name | What it ranks | NIPs/NUDs |
|-|-|-|
| `buyer` | goods/services buyer | |
| `car:driver` | car driver | |
| `inn:host` | (inn, hotel, hostel, etc) host  | |
| `inn:guest` | (inn, hotel, hostel, etc) guest | |
| `seller` | goods/services seller | |
| `wiki:<article-name>` | article author | [NIP-54](54.md) |
