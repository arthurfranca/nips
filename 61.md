NIP-61
======

Event Sets
----------

`draft` `optional`

An event set is a group of events with the same pubkey and `n` (set "n"ame) tag.
An event can have many `n` tags, thus being member of many event sets.

To add an event to the "Close Friends" set,
add a "close-friend" (prefer lowercase English words in singular form with dash separator) `n` tag to the event.

To remove an event from a "Close Friends" set,
remove the "close-friend" `n` tag from the event or send a deletion event (`kind:5`).

An event set itself is referenced by an `s` tag
or by an `nset` [NIP-19](19.md) entity using [NIP-21](21.md) URI.

## Referencing

An event set is referenced by an `s` tag.
It references a set of events from an author instead of a single one:

`["s", "<kind, optional>:<32-bytes lowercase hex of a pubkey>:<n tag value>", "<recommended relay URL, optional>"]`

One may also use an `nset` entity URI: `nostr:nset1qqstn...794234d`.

## Event Kinds

The same `n` tag can be applied to any event no matter the `kind` or structure.

The following example is based on the unreleased
[Relationship Status](https://github.com/vitorpamplona/nips/blob/relationship-status/81.md) spec:

```js
{
  "kind": 30382, // This is a kind for public relationship info between the signer and another user
  "pubkey": "<me>",
  "tags": [
    ["d", "<another-user-pubkey>"],
    ["n", "follow"], // A "follow" "n" tag turns this event into a kind 3 equivalent entry
    ["n", "friend"], // He is part of may "Friends" set
    ["n", "close-friend"], // He is also part of my smaller "Close Friends" set
    ["n", "contact"], // My contacts are users to whom I've sent DMs or started an one-to-one audio/video call
    // ...other metadata describing the relationship
  ],
  "content": ""
  // ...other fields
}
```

In the above example, when removing someone from an event set (considering a `kind:30382` event),
a client should only delete the event when all tags other
than the `d` one were removed and the content is an empty string.

## Final Considerations

NIP-51 lists have a limit on the number of items they can hold depending on relay's event size restrictions,
while event sets can have any number of items.

The downside of event sets is that migrating a set from one relay to another can be rate limited
due to saving many individual events during a small time window.
